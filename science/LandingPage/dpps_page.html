<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DPP Generator | EduLens</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: "Inter", sans-serif;
      background: #f0f2f5; color: #111; padding: 2rem;
    }
    h1 { text-align: center; font-weight: 600; margin-bottom: 2rem; color: #1a1a1a; }

    .tabs { display:flex; justify-content:center; margin-bottom:1.5rem; }
    .tab {
      margin:0 1rem; padding:0.5rem 1.5rem; border-radius:10px; cursor:pointer;
      font-weight:600; color:#007aff; background:#fff; border:2px solid #007aff;
      transition: all 0.3s ease;
    }
    .tab.active { background:#007aff; color:white; }

    .form-container { display:flex; justify-content:center; gap:1rem; flex-wrap:wrap; margin-bottom:2rem; }
    .form-container input, .form-container select, .form-container button {
      padding:0.7rem 1.2rem; font-size:1rem; border-radius:14px; border:1px solid #ccc;
      background: rgba(255,255,255,0.8); transition:0.3s;
    }
    .form-container button {
      background:#007aff; color:white; font-weight:bold; border:none;
    }
    .form-container button:hover { background:#005ecc; }

    .summary-info { text-align:center; margin-bottom:1rem; font-size:1rem; color:#444; }

    .question-card {
      background:white; border-radius:18px; box-shadow:0 4px 20px rgba(0,0,0,0.08);
      padding:1.8rem 2rem; margin-bottom:1.8rem; transition:0.2s;
    }
    .question-card:hover {
      transform: translateY(-4px);
      box-shadow:0 6px 25px rgba(0,0,0,0.1);
    }

    .question-number { font-size:1.3rem; font-weight:600; color:#333; margin-bottom:1rem; }
    .question-text { font-size:1.05rem; color:#444; }

    .answer-input {
      width:100%; margin-top:1rem; padding:0.7rem; font-size:1rem;
      border-radius:10px; border:1px solid #ccc;
    }

    .submit-btn {
      margin-top:0.7rem; padding:0.6rem 1.2rem;
      background:#28a745; color:white; font-weight:600; border:none;
      border-radius:10px; cursor:pointer;
    }
    .submit-btn:hover { background:#218838; }

    details summary {
      cursor:pointer; font-weight:500; margin-top:1rem; color:#007aff;
    }
    summary.locked-summary { color:#777; pointer-events:none; }
    summary.unlocked-summary { color:#007aff; pointer-events:auto; }

    #historyContainer { display:none; }
    .history-entry {
      background:linear-gradient(135deg,#ffffff,#f8fcff); padding:1.3rem;
      border-radius:16px; margin-bottom:1.2rem; box-shadow:0 4px 12px rgba(0,0,0,0.1);
      transition:0.2s;
    }
    .history-entry:hover { transform: translateY(-3px); }
    .history-actions { margin-top:0.6rem; display:flex; gap:0.7rem; }
    .history-actions button { padding:0.5rem 1rem; border:none; border-radius:8px; cursor:pointer; }
    .resume { background:#007aff; color:white; }
    .delete { background:#dc3545; color:white; }

    @media screen and (max-width:600px) {
      .form-container { flex-direction:column; align-items:center; }
      .form-container input, .form-container select, .form-container button { width:100%; }
    }
  </style>
</head>

<body>
  <h1>ðŸ”¥ DPP Generator</h1>

  <div class="tabs">
    <div class="tab active" onclick="showTab('generator')">ðŸ“š Generator</div>
    <div class="tab" onclick="showTab('history')">ðŸ“œ History</div>
  </div>

  <div class="summary-info" id="summaryInfo"></div>

  <div id="generatorContainer">
    <div class="form-container">
      <input type="text" id="topic" placeholder="Enter Topic" />
      <select id="difficulty">
        <option value="Medium">Select Difficulty (default: Medium)</option>
        <option value="Easy">Easy</option>
        <option value="Medium">Medium</option>
        <option value="Hard">Hard</option>
      </select>
      <button onclick="generateDPP()">Generate DPP</button>
    </div>

    <div id="questionContainer"></div>
  </div>

  <!-- HISTORY -->
  <div id="historyContainer">
    <div id="historyList"></div>
  </div>

  <script>
    /* ------------------------------------
       READ URL PARAMS
    -------------------------------------*/
    const queryParams = (() => {
      const params = {};
      window.location.search.substring(1).split("&").forEach((pair) => {
        const [k, v] = pair.split("=");
        params[decodeURIComponent(k)] = decodeURIComponent(v || "");
      });
      return params;
    })();

    /* ------------------------------------
       SUBJECT-WISE QUESTION BANK
    -------------------------------------*/
    const questionBank = {
      science: [
        { question: "State the law of universal gravitation.", answer: "Every particle attracts every other..." },
        { question: "Define gravitational force.", answer: "A force of attraction between masses." },
        { question: "What is acceleration due to gravity?", answer: "9.8 m/sÂ² on Earth." },
        { question: "What is free fall?", answer: "Motion under gravity alone." },
        { question: "What happens if mass increases?", answer: "Gravitational force increases." },
        { question: "What happens if distance doubles?", answer: "Force becomes one-fourth." },
        { question: "Define weight.", answer: "Force with which Earth attracts a body." },
        { question: "Define mass.", answer: "Amount of matter." },
        { question: "Why do objects fall to Earth?", answer: "Due to Earthâ€™s gravity." },
        { question: "Why are astronauts weightless?", answer: "They are in free fall." }
      ],

      mathematics: [
        { question: "Define a circle.", answer: "Set of all points equidistant from a point." },
        { question: "Define radius.", answer: "Distance from center to any point on circle." },
        { question: "Define diameter.", answer: "Longest chord passing through center." },
        { question: "Define chord.", answer: "Line segment joining two points on circle." },
        { question: "Define arc.", answer: "Part of circumference." },
        { question: "Define sector.", answer: "Region bounded by two radii and arc." },
        { question: "Define segment.", answer: "Region bounded by chord and arc." },
        { question: "Area of circle?", answer: "Ï€rÂ²" },
        { question: "Circumference of circle?", answer: "2Ï€r" },
        { question: "What is tangent?", answer: "Line touching circle at exactly one point." }
      ],

      sst: [
        { question: "Who was Adolf Hitler?", answer: "Leader of Nazi Party, dictator of Germany." },
        { question: "What is Nazism?", answer: "Ideology of racial superiority and dictatorship." },
        { question: "When did Hitler become Chancellor?", answer: "1933" },
        { question: "Name Hitlerâ€™s autobiography.", answer: "Mein Kampf" },
        { question: "What was the Enabling Act?", answer: "Gave Hitler dictatorial powers." },
        { question: "What was the Nazi ideology?", answer: "Aryan superiority, nationalism." },
        { question: "What caused the rise of Hitler?", answer: "Economic crisis + propaganda." },
        { question: "What was the Youth League?", answer: "Nazi training wing for children." },
        { question: "What is propaganda?", answer: "Misleading info to influence people." },
        { question: "What ended Hitlerâ€™s rule?", answer: "Germanyâ€™s defeat in WWII." }
      ],

      computers: [
        { question: "What is Python?", answer: "A high-level programming language." },
        { question: "What is a variable?", answer: "A container to store values." },
        { question: "What is a loop?", answer: "Used for repeated execution." },
        { question: "What is indentation in Python?", answer: "Spaces defining code blocks." },
        { question: "What is a list?", answer: "Ordered collection of items." },
        { question: "What is a function?", answer: "Block of reusable code." },
        { question: "What is type casting?", answer: "Converting one datatype to another." },
        { question: "What is a string?", answer: "Sequence of characters." },
        { question: "What is print() used for?", answer: "Output text." },
        { question: "What is input() used for?", answer: "Take user input." }
      ]
    };

    /* ------------------------------------
       PAGE INITIALIZE
    -------------------------------------*/
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("summaryInfo").innerHTML = `
        <strong>Class:</strong> ${queryParams.class || "9"} |
        <strong>Subject:</strong> ${queryParams.subject || "Science"} |
        <strong>Difficulty:</strong> ${queryParams.difficulty || "Medium"} |
        <strong>Questions:</strong> 10
      `;
      loadHistory();
    });

    /* ------------------------------------
       GENERATE DPP
    -------------------------------------*/
    function generateDPP() {
      const subject = queryParams.subject?.toLowerCase() || "science";
      const container = document.getElementById("questionContainer");
      const questions = questionBank[subject] || [];

      container.innerHTML = "";

      questions.forEach((q, i) => {
        const card = document.createElement("div");
        card.className = "question-card";
        card.innerHTML = `
          <div class="question-number">Q${i + 1}.</div>
          <div class="question-text">${escapeHtml(q.question)}</div>
          <input class="answer-input" id="input-${i}" placeholder="Your answer hereâ€¦">
          <button class="submit-btn" onclick="submitAnswer(${i})">Submit Answer</button>
          <div class="response-text" id="response-${i}"></div>
          <details id="details-${i}">
            <summary class="locked-summary">Show Answer</summary>
            <p>${escapeHtml(q.answer)}</p>
          </details>
        `;
        container.appendChild(card);
      });
    }

    /* ------------------------------------
       ANSWER SUBMISSION
    -------------------------------------*/
    function submitAnswer(i) {
      const inp = document.getElementById(`input-${i}`);
      const resp = document.getElementById(`response-${i}`);
      if (!inp.value.trim()) return alert("Please enter an answer.");
      resp.textContent = "âœ… Answer submitted";

      const det = document.getElementById(`details-${i}`);
      det.open = true;
      det.querySelector("summary").classList.replace("locked-summary", "unlocked-summary");
    }

    /* ------------------------------------
       HISTORY SYSTEM
    -------------------------------------*/
    function loadHistory() {
      document.getElementById("historyList").innerHTML = "<p>History disabled for now.</p>";
    }

    function showTab(tab) {
      document.querySelectorAll(".tab").forEach((t) => t.classList.remove("active"));
      if (tab === "history") {
        document.getElementById("generatorContainer").style.display = "none";
        document.getElementById("historyContainer").style.display = "block";
        document.querySelector(".tab:nth-child(2)").classList.add("active");
      } else {
        document.getElementById("generatorContainer").style.display = "block";
        document.getElementById("historyContainer").style.display = "none";
        document.querySelector(".tab:nth-child(1)").classList.add("active");
      }
    }

    function escapeHtml(str) {
      return String(str)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
    }
  </script>
</body>
</html>
